<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Chat App</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body {
  margin: 0;
  background-color: #121212;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  height: 100vh;
  color: #eee;
}
#terminal {
  padding: 1rem;
  height: 100vh;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  max-width: 1200px;
  margin: 0 auto;
  background-color: #1e1e1e;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
}
#output {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
}
.message-container {
  display: flex;
  align-items: flex-start;
  margin-bottom: 16px;
  width: 100%;
}
.user-container {
  flex-direction: row;
}
.response-container {
  flex-direction: row-reverse;
}
.avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  margin: 0 10px;
  flex-shrink: 0;
}
.user-avatar {
  background: linear-gradient(135deg, #3a1c71, #d76d77);
  color: white;
}
.response-avatar {
  background: linear-gradient(135deg, #1a2980, #26d0ce);
  color: white;
}
.message {
  position: relative;
  max-width: 70%;
  padding: 12px 16px;
  border-radius: 12px;
  word-break: break-word;
}
.message::before {
  content: '';
  position: absolute;
  top: 12px;
  width: 12px;
  height: 12px;
  transform: rotate(45deg);
}
.user-message {
  background: linear-gradient(135deg, #3a1c71, #d76d77);
  color: white;
  border-top-left-radius: 4px;
}
.user-message::before {
  left: -6px;
  background: #3a1c71;
}
.response-message {
  background: linear-gradient(135deg, #1a2980, #26d0ce);
  color: white;
  border-top-right-radius: 4px;
}
.response-message::before {
  right: -6px;
  background: #26d0ce;
}
#inputContainer {
  display: flex;
  border-top: 1px solid #333;
  padding: 15px 0;
}
#commandInput {
  flex: 1;
  border: none;
  border-radius: 20px;
  background: #2d2d2d;
  color: #eee;
  padding: 12px 18px;
  font-size: 14px;
  outline: none;
}
#commandInput:focus {
  background: #3d3d3d;
  box-shadow: 0 0 5px rgba(255,255,255,0.2);
}
</style>
</style>
</head>
<body>
<div id="terminal">
  <div id="output"></div>
  <div id="inputContainer">
    <input type="text" id="commandInput" autofocus placeholder="Type a message..." />
  </div>
</div>
<script>
const { ipcRenderer } = require("electron");
window.addEventListener("DOMContentLoaded", () => {
  const input = document.getElementById("commandInput");
  const output = document.getElementById("output");
  
  input.addEventListener("keydown", async (e) => {
    if (e.key === "Enter") {
      const command = input.value.trim();
      if (command) {
        // Create user message container and components
        const userContainer = document.createElement("div");
        userContainer.className = "message-container user-container";
        
        // User avatar
        const userAvatar = document.createElement("div");
        userAvatar.className = "avatar user-avatar";
        const userIcon = document.createElement("i");
        userIcon.className = "fas fa-user";
        userAvatar.appendChild(userIcon);
        
        // User message
        const userMessage = document.createElement("div");
        userMessage.className = "message user-message";
        userMessage.textContent = command;
        
        // Add elements to container
        userContainer.appendChild(userAvatar);
        userContainer.appendChild(userMessage);
        output.appendChild(userContainer);
        
        input.value = "";
        
        // Get response
        const result = await ipcRenderer.invoke("run-command", command);
        
        // Create response container and components
        const responseContainer = document.createElement("div");
        responseContainer.className = "message-container response-container";
        
        // Response avatar
        const responseAvatar = document.createElement("div");
        responseAvatar.className = "avatar response-avatar";
        const responseIcon = document.createElement("i");
        responseIcon.className = "fas fa-robot";
        responseAvatar.appendChild(responseIcon);
        
        // Response message
        const responseMessage = document.createElement("div");
        responseMessage.className = "message response-message";
        responseMessage.textContent = result;
        
        // Add elements to container
        responseContainer.appendChild(responseAvatar);
        responseContainer.appendChild(responseMessage);
        output.appendChild(responseContainer);
        
        // Scroll to bottom
        output.scrollTop = output.scrollHeight;
      }
    }
  });
});
</script>
</body>
</html>